<!-- {^if $full_page^} -->
<!-- {^include file="common/breadcrumb.html"^} -->
<!-- {^include file="common/header.html" controller="EMailQueue"^} -->
<form action="{^$smarty.server.SCRIPT_FILENAME|basename^}" method="post" name="list-form">
<input type="hidden" name="action" value="">
<div id="list-div" data-remove-text="您確認要刪除這筆資料嗎？" data-record-count='{^$record_count^}' data-page-count='{^$page_count^}' data-filter='{^$filter|default|json_encode^}'>
<!-- {^/if^} -->
  <div class="panel table-light"{^if not $full_page^} assign-query-info="{^$query_info|default^}" assign-gzip-enabled="{^$gzip_enabled|default^}" assign-memory-info="{^$memory_info|default^}"{^/if^}>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th class="text-center px-width-30 hidden-xs hidden-sm">
            <label class="custom-checkbox">
              <input type="checkbox" data-row-multi="true" class="custom-control-input">
              <span class="custom-control-indicator"></span>
            </label>
          </th>
          <th data-field-sort="email_subject" class="text-center hidden-xs hidden-sm hidden-md hidden-lg">
            <span class="pull-right"><i class="fas fa-sort-amount{^$sort_email_subject|default^}"></i></span>
            郵件標題
          </th>
          <th data-field-sort="email" class="text-center">
            <span class="pull-right"><i class="fas fa-sort-amount{^$sort_email|default^}"></i></span>
            郵件地址
          </th>
          <th data-field-sort="pri" class="text-center px-width-110 hidden-xs hidden-sm hidden-md hidden-lg">
            <span class="pull-right"><i class="fas fa-sort-amount{^$sort_pri|default^}"></i></span>
            優先等級
          </th>
          <th class="text-center px-width-80 hidden-xs hidden-sm hidden-md hidden-lg">
            郵件類型
          </th>
          <th data-field-sort="error" class="text-center px-width-110 hidden-xs hidden-sm hidden-md">
            <span class="pull-right"><i class="fas fa-sort-amount{^$sort_error|default^}"></i></span>
            錯誤次數
          </th>
          <th data-field-sort="last_send" class="text-center px-width-130 hidden-xs hidden-sm hidden-md">
            <span class="pull-right"><i class="fas fa-sort-amount{^$sort_last_send|default^}"></i></span>
            上次發送
          </th>
          <th class="text-center px-width-70 hidden-xs hidden-sm">
            操作
          </th>
          <th class="text-center px-width-50 visible-xs visible-sm">
            操作
          </th>
        </tr>
      </thead>
      <tbody>
        <!-- {^foreach from=$item_arr item=item^} -->
        <tr data-item-id="{^$item.id^}">
          <td class="text-center hidden-xs hidden-sm">
            <label class="custom-checkbox">
              <input type="checkbox" name="checkboxes[]" value="{^$item.id^}" class="custom-control-input">
              <span class="custom-control-indicator"></span>
            </label>
          </td>
          <td class="hidden-xs hidden-sm hidden-md hidden-lg">{^$item.email_subject^}</td>
          <td>{^$item.email^}</td>
          <td class="hidden-xs hidden-sm hidden-md hidden-lg">{^$item.pri^}</td>
          <td class="text-center hidden-xs hidden-sm hidden-md hidden-lg">{^$item.type^}</td>
          <td class="text-center hidden-xs hidden-sm hidden-md">{^$item.error^}</td>
          <td class="text-center hidden-xs hidden-sm hidden-md">{^$item.last_send|format_date:'time_format'|default:'N/A'^}</td>
          <td class="text-center hidden-xs hidden-sm">
            <div class="btn-group-sm">
              <a href="#" title="刪除" class="btn btn-outline btn-danger" data-item-handler="remove">
                <i class="fas fa-trash-alt fa-fw"></i>
                刪除
              </a>
            </div>
          </td>
          <td class="text-center visible-xs visible-sm">
            <div class="dropdown">
              <button type="button" class="btn btn-sm btn-outline btn-outline-colorless dropdown-toggle" data-toggle="dropdown" aria-expanded="false" data-position="auto">
                <i class="fas fa-bars"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-right">
                <li><a href="#" data-item-handler="remove" class="text-danger"><i class="dropdown-icon fas fa-trash-alt fa-fw"></i>&nbsp;&nbsp;刪除</a></li>
              </div>
            </div>
          </td>
        </tr>
        <!-- {^foreachelse^} -->
        <tr><td class="no-records" colspan="8">目前沒有任何記錄</td></tr>
        <!-- {^/foreach^} -->
      </tbody>
    </table>
  </div>
  <div class="pull-left hidden-xs">
    <button type="submit" id="btnSubmit1" data-form-action="batch_remove" class="btn btn-danger btn-sm" disabled>
      批次刪除
    </button>
    <button type="submit" id="btnSubmit2" data-form-action="batch_afresh" class="btn btn-danger btn-sm" disabled>
      發送次數歸零
    </button>
  </div>
  <div class="pull-right text-right">{^include file="common/page.html"^}</div>
<!-- {^if $full_page^} -->
</div>
</form>
<!-- {^/if^} -->